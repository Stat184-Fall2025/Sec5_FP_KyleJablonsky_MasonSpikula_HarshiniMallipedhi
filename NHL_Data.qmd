---
title: "NHL Team Statistics"
subtitle: "STAT 184"
authors: "Mason Spikula - Harshini Mallipedhi - Kyle Jablonsky"
date: "Monday, December 8, 2025"
date-format: full
date-modified: now

format:
  html:
    embed-resources: true
    number-sections: true
    toc: true
    toc-depth: 4
    toc-location: right
    fig-align: center
    cap-location: top
    link-external-newwindow: true
  pdf:
    toc: true
    number-sections: true

execute:
  echo: false
  eval: true
  warning: false
engine: knitr
---

# Introduction

In this report, we analyze team-level statistics from the 2022–2023 NHL season to
identify which factors are most strongly associated with team success (wins and
total points). We focus on:

- Overall performance (wins `W`, points `PTS`)
- Goal scoring and prevention (`GF`, `GA`, `DIFF`)
- Shootout-related performance (`SOG`, `SO_PTS`, `Pct_SO`)
- Regulation/overtime performance (`Reg_PTS`, `PPG`, `ROW`)

::: {.callout-note}
**TODO (write-up):** Briefly restate your project goal in your own words and
explain why this question is interesting.
:::

# Importing and Tidying Data

Here we are importing the data from the csv and checking that it is imported.

```{r}
#| label: setup
#| include: true

library(tidyverse)
library(tidyverse)     # ggplot2, dplyr, readr, tidyr, tibble
library(dplyr)         # data cleaning + summaries
library(ggplot2)       # visualizations
library(readr)         # reading CSVs
library(knitr)         # tables
library(kableExtra)    # nicer-looking tables

nhl <- readr::read_csv("nhl_2223.csv")

nhl

```

After correctly importing the data, we have have to tidy it. Although the data is already tidied, it isn't done optimally for what we are trying to do. In this step, we are adding other attributes to the data table

```{r}
nhl_clean <- nhl %>%
mutate(
  win_pct = W / GP,
  pts_per_game = PTS / GP,
  goals_for_per_game = GF / GP,
  goals_against_per_game = GA / GP,
  diff_per_game = DIFF / GP
)

head(nhl_clean)
```

Now, we are going to summarize the data to see what the averages are throughout the league. We aren't going to do goal differential because it will be 0 since every goal scored for a team is also a goal against another team.

```{r}
nhl_summary <- nhl_clean %>%
summarize(
  avg_wins = mean(W),
  avg_points = mean(PTS),
  avg_gf = mean(GF),
  avg_ga = mean(GA),
)

nhl_summary
```

Here is a table with the averages of each attribute throughout the league

# Graphs

Now that the data is fully tidied, we are going to create graphs for our data to compare how effective different attributes are at leading towards wins.

```{r}
nhl_clean %>%
ggplot(aes(x = W)) +
geom_histogram(bins = 10) +
labs(
x = "Wins",
y = "Number of Teams",
title = "Distribution of Wins (2022–23 NHL Season)"
)
```

Above is a graph showing win distributions, this helps show us that most teams have from 40-50 wins.

```{r}
nhl_clean %>%
ggplot(aes(x = PTS)) +
geom_histogram(bins = 10) +
labs(
x = "Total Points",
y = "Number of Teams",
title = "Distribution of Total Points"
)
```

Above is a graph showing point distribution, this is interesting as you expect this graph to be very similar to the wins graph as every win is worth 2 points but its not. This shows us that points from overtime loses matter more than you would expect as they give one point.


```{r}
nhl_clean %>%
ggplot(aes(x = GF, y = GA, label = Team)) +
geom_point() +
ggrepel::geom_text_repel(size = 3) +
geom_smooth(method = "lm", se = FALSE) +
labs(
title = "Goals For vs Goals Against",
x = "Goals For",
y = "Goals Against"
)
```

Above is a graph showing the relationship between Goals for and Goals against, this stays consisntent with what we would expect in having the teams who made made playoffs in having those teams be farther to the right and you can even see a slight gap bettween the playoff teams and the other teams, this is true for all of the playoff teams except for the Islanders and Wild as they have a Low Goals for and Low Goals against and they are next to teams who did not make the playoffs. This shows us that the Islanders and Wild were probably defense first teams with good goaltenders compared to the rest of the teams.

```{r}
nhl_clean %>%
ggplot(aes(x = GF, y = PTS, label = Team)) +
geom_point() +
ggrepel::geom_text_repel() +
geom_smooth(method = "lm", se = FALSE) +
labs(
title = "Points vs Goals For",
x = "Goals For",
y = "Total Points"
)
```

Above is a graph showing the relationship between Goals for and Points, this again stays consisnten with what we would expect for playoff teams being in the top right, and again the Islanders and Wild are below the gap between other playoff teams and other teams.

```{r}
nhl_clean %>%
ggplot(aes(x = GA, y = PTS, label = Team)) +
geom_point() +
ggrepel::geom_text_repel() +
geom_smooth(method = "lm", se = FALSE) +
labs(
title = "Points vs Goals Against",
x = "Goals Against",
y = "Total Points"
)
```

Above is a graph showing the relationship between Goals against and Points, this graph is not as skewed and there is no gapt between playoff teams and other teams. This shows that the higher your Goals against the lower your points.

```{r}
nhl_clean %>%
ggplot(aes(x = DIFF, y = W, label = Team)) +
geom_point() +
ggrepel::geom_text_repel() +
geom_smooth(method = "lm", se = FALSE) +
labs(
title = "Goal Differential vs Wins",
x = "Goal Differential",
y = "Wins"
)
```

Above is a graph 

```{r}
nhl_clean %>%
ggplot(aes(x = DIFF, y = PTS, label = Team)) +
geom_point() +
ggrepel::geom_text_repel() +
geom_smooth(method = "lm", se = FALSE) +
labs(
title = "Goal Differential vs Total Points",
x = "Goal Differential",
y = "Total Points"
)
```

```{r}
nhl_clean %>%
ggplot(aes(x = SO_PTS, y = PTS, label = Team)) +
geom_point() +
ggrepel::geom_text_repel() +
geom_smooth(method = "lm", se = FALSE) +
labs(
title = "Shootout Points vs Total Points",
x = "Shootout Points",
y = "Total Points"
)
```

```{r}
nhl_clean %>%
ggplot(aes(x = PPG, y = Pct_SO, label = Team)) +
geom_point() +
ggrepel::geom_text_repel() +
geom_smooth(method = "lm", se = FALSE) +
labs(
title = "Non-Shootout Performance vs Shootout Success",
x = "Points per non-shootout game (PPG)",
y = "Shootout Points Percentage"
)
```
